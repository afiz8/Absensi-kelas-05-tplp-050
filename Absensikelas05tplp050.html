<!DOCTYPE html>  <html lang="id">  
<head>  
  <meta charset="UTF-8" />  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />  
  <title>Absensi Kelas 05 TPLP 050</title>  
  <style>  
    body {  
      font-family: Arial, sans-serif;  
      margin: 20px;  
      background: #f8f9fa;  
    }  
    h1 {  
      text-align: center;  
      margin-bottom: 20px;  
      color: #333;  
    }  
    .controls {  
      display: flex;  
      gap: 10px;  
      justify-content: center;  
      margin-bottom: 20px;  
      flex-wrap: wrap;  
    }  
    input[type="text"] {  
      padding: 8px;  
      width: 220px;  
      border: 1px solid #ccc;  
      border-radius: 5px;  
    }  
    button {  
      padding: 8px 14px;  
      border: none;  
      border-radius: 5px;  
      cursor: pointer;  
      background-color: #007bff;  
      color: white;  
      transition: 0.3s;  
    }  
    button:hover {  
      background-color: #0056b3;  
    }  
    table {  
      width: 100%;  
      border-collapse: collapse;  
      background: white;  
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);  
    }  
    th, td {  
      padding: 10px;  
      text-align: center;  
      border-bottom: 1px solid #ddd;  
    }  
    th {  
      background: #007bff;  
      color: white;  
      position: sticky;  
      top: 0;  
      z-index: 1;  
    }  
    .status {  
      padding: 4px 8px;  
      border-radius: 4px;  
      display: inline-block;  
      min-width: 70px;  
    }  
    .s-hadir { background: #28a745; color: white; }  
    .s-tidak { background: #dc3545; color: white; }  
    .s-izin { background: #ffc107; color: black; }  
    .row-highlight { background: #ffeaea; }  
    #stats {  
      margin-top: 15px;  
      text-align: center;  
      font-weight: bold;  
      color: #333;  
    }  
    footer {  
      text-align: center;  
      margin-top: 25px;  
      color: #777;  
    }  
  </style>  
</head>  
<body>  
  <h1>üìã ABSENSI KELAS 05 TPLP 050</h1>    <div class="controls">  
    <input type="text" id="search" placeholder="Cari nama atau NIM..." />  
    <button id="exportCsv">üì§ Ekspor CSV</button>  
    <button id="resetAll">üîÑ Reset Status</button>  
    <button id="clearStorage">üóëÔ∏è Hapus Data</button>  
  </div>    <table id="attendanceTable">  
    <thead>  
      <tr>  
        <th>No</th>  
        <th>NIM</th>  
        <th>Nama</th>  
        <th>Status</th>  
        <th>Aksi</th>  
      </tr>  
    </thead>  
    <tbody></tbody>  
  </table>    <div id="stats">Memuat data...</div>    <footer>¬© 2025 Kelas 05 TPLP 050 ‚Äî Sistem Absensi Lokal</footer>    <script>  
/*  
DATA MAHASISWA  
Kelas: 05 TPLP 050  
Jika ada koreksi NIM atau Nama, ubah langsung di sini.  
Afiz Hasyim Musyafa => 231011401927  
*/  
const students = [  
  { no: 1, nim: "231011401425", name: "ADITTIA" },  
  { no: 2, nim: "231011401927", name: "AFIZ HASYIM MUSYAFA" },  
  { no: 3, nim: "231011402963", name: "AFLIADI RAHMAN SYAH" },  
  { no: 4, nim: "231011401432", name: "ARDHIAN ADI PRASETTO" },  
  { no: 5, nim: "231011403064", name: "ARNOVA MALAU" },  
  { no: 6, nim: "231011401414", name: "CELVINE" },  
  { no: 7, nim: "231011401922", name: "DIO VIELSA ALKAFI" },  
  { no: 8, nim: "231011402928", name: "DZAKI NUR FAZRI" },  
  { no: 9, nim: "231011401450", name: "EVAN NURHOLIS" },  
  { no: 10, nim: "231011401445", name: "FADHEL RIZKT AN NAAFI" },  
  { no: 11, nim: "231011403287", name: "INDRA FAUZAN" },  
  { no: 12, nim: "231011401924", name: "JASWA ARIANSYA" },  
  { no: 13, nim: "231011401421", name: "JEREMIA RAPHA NG" },  
  { no: 14, nim: "231011402552", name: "LILI JULIA ZAUMA" },  
  { no: 15, nim: "231011401929", name: "LUCKY RIZKY ZOELISTYA" },  
  { no: 16, nim: "231011403479", name: "MUHAMAD AJI SATRIO" },  
  { no: 17, nim: "231011401928", name: "MUHAMAD DAFFA" },  
  { no: 18, nim: "231011401438", name: "MUHAMMAD EMILLUL FATA RETNOO" },  
  { no: 19, nim: "201011401113", name: "MUHAMMAD HAIKAL FAQIH" },  
  { no: 20, nim: "231011402645", name: "MUHAMMAD RAFI NORIKHSAN" },  
  { no: 21, nim: "231011401442", name: "NANDAR" },  
  { no: 22, nim: "231011401416", name: "NAUVAL RIFALDYTANSYAH PUTRA" },  
  { no: 23, nim: "231011401444", name: "PRABU WIRA PUTRANTO" },  
  { no: 24, nim: "231011402202", name: "RENDY JANU SHAFA ARDHANA" },  
  { no: 25, nim: "231011401439", name: "RIZKY RAMADHANI SINITE" },  
  { no: 26, nim: "231011401420", name: "SHARUL RAHMARDA" },  
  { no: 27, nim: "231011403003", name: "TAMARA DEBORA PERMATA" },  
  { no: 28, nim: "231011403652", name: "TRI WAHYUNI LESTARI" },  
  { no: 29, nim: "231011401435", name: "WILY AFRIADI" },  
];  
  
const LS_KEY = "absensi_05_tplp_050_v1";  
  
function loadAttendance() {  
  const raw = localStorage.getItem(LS_KEY);  
  if (!raw) return students.map(s => ({ nim: s.nim, status: "", name: s.name, no: s.no }));  
  try {  
    const parsed = JSON.parse(raw);  
    if (!Array.isArray(parsed) || parsed.length !== students.length) {  
      return students.map(s => ({ nim: s.nim, status: "", name: s.name, no: s.no }));  
    }  
    return parsed;  
  } catch {  
    return students.map(s => ({ nim: s.nim, status: "", name: s.name, no: s.no }));  
  }  
}  
  
let attendance = loadAttendance();  
let filteredAttendance = [...attendance];  
  
function saveAttendance() {  
  localStorage.setItem(LS_KEY, JSON.stringify(attendance));  
}  
  
function updateStats() {  
  const hadir = attendance.filter(r => r.status === "Hadir").length;  
  const tidak = attendance.filter(r => r.status === "Tidak Hadir").length;  
  const izin = attendance.filter(r => r.status === "Izin").length;  
  const total = attendance.length;  
  document.getElementById("stats").innerHTML =  
    `Total: ${total} | Hadir: ${hadir} | Tidak Hadir: ${tidak} | Izin: ${izin}`;  
}  
  
const tbody = document.querySelector("#attendanceTable tbody");  
function renderTable(data = attendance) {  
  tbody.innerHTML = "";  
  data.forEach((row) => {  
    const globalIdx = attendance.findIndex(r => r.nim === row.nim);  
    const tr = document.createElement("tr");  
    if (row.status === "Tidak Hadir") tr.classList.add("row-highlight");  
  
    tr.innerHTML = `  
      <td>${row.no}</td>  
      <td>${row.nim}</td>  
      <td>${row.name}</td>  
      <td>  
        <span class="status ${row.status === 'Hadir' ? 's-hadir' : row.status === 'Tidak Hadir' ? 's-tidak' : row.status === 'Izin' ? 's-izin' : ''}">  
          ${row.status || '-'}  
        </span>  
      </td>  
      <td>  
        <button class="action-btn" data-act="hadir" data-idx="${globalIdx}">Hadir</button>  
        <button class="action-btn" data-act="tidak" data-idx="${globalIdx}">Tidak Hadir</button>  
        <button class="action-btn" data-act="izin" data-idx="${globalIdx}">Izin</button>  
      </td>  
    `;  
    tbody.appendChild(tr);  
  });  
  updateStats();  
}  
  
document.getElementById("search").addEventListener("input", (e) => {  
  const term = e.target.value.toLowerCase();  
  filteredAttendance = attendance.filter(row =>  
    row.nim.toLowerCase().includes(term) || row.name.toLowerCase().includes(term)  
  );  
  renderTable(filteredAttendance);  
});  
  
tbody.addEventListener("click", function (e) {  
  const btn = e.target.closest("button[data-act]");  
  if (!btn) return;  
  const act = btn.getAttribute("data-act");  
  const idx = Number(btn.getAttribute("data-idx"));  
  if (isNaN(idx)) return;  
  if (act === "hadir") attendance[idx].status = "Hadir";  
  if (act === "tidak") attendance[idx].status = "Tidak Hadir";  
  if (act === "izin") attendance[idx].status = "Izin";  
  saveAttendance();  
  
  const term = document.getElementById("search").value.toLowerCase();  
  filteredAttendance = attendance.filter(row =>  
    row.nim.toLowerCase().includes(term) || row.name.toLowerCase().includes(term)  
  );  
  renderTable(filteredAttendance);  
});  
  
function exportCSV() {  
  const header = ["No", "NIM", "Nama", "Status"];  
  const rows = attendance.map(r => [r.no, r.nim, r.name, r.status]);  
  const csv = [header.join(","), ...rows.map(r => r.join(","))].join("\n");  
  const blob = new Blob([csv], { type: "text/csv;charset=utf-8;" });  
  const url = URL.createObjectURL(blob);  
  const a = document.createElement("a");  
  const now = new Date();  
  a.href = url;  
  a.download = `absensi_05_TPLP_050_${now.toISOString().slice(0, 10)}.csv`;  
  document.body.appendChild(a);  
  a.click();  
  URL.revokeObjectURL(url);  
  a.remove();  
}  
  
document.getElementById("exportCsv").addEventListener("click", exportCSV);  
document.getElementById("resetAll").addEventListener("click", () => {  
  if (!confirm("Reset semua status absensi menjadi kosong?")) return;  
  attendance = students.map(s => ({ nim: s.nim, status: "", name: s.name, no: s.no }));  
  filteredAttendance = [...attendance];  
  saveAttendance();  
  renderTable();  
});  
document.getElementById("clearStorage").addEventListener("click", () => {  
  if (!confirm("Hapus data absensi di local storage? (tidak bisa dibatalkan)")) return;  
  localStorage.removeItem(LS_KEY);  
  attendance = students.map(s => ({ nim: s.nim, status: "", name: s.name, no: s.no }));  
  filteredAttendance = [...attendance];  
  renderTable();  
});  
  
renderTable();  
  </script>  </body>  
</html>
